# UnityInput

[![npm version](https://badge.fury.io/js/unityinput.svg)](http://badge.fury.io/js/unityinput) [![Build Status](https://travis-ci.org/digijin/inputjs.svg?branch=master)](https://travis-ci.org/digijin/inputjs) [![Coverage Status](https://coveralls.io/repos/github/digijin/inputjs/badge.svg?branch=master)](https://coveralls.io/github/digijin/inputjs?branch=master)

## Intro

This class is heavily inspired by [Unity editor's Input class](https://docs.unity3d.com/ScriptReference/Input.html). methods in this class can be used the same way but with a more traditional js nomenclature starting with a lowercase character for function names.

This is intended to be used for gaming. If you're trying to use it for standard web stuff, this might not be the package for you.

Usage of the getKey and getButton functions can be used with no additional setup, but to use the activity functions like getButtonDown and getButtonUp one must invoke the endTick function at the end of each frame loop to flush the internal caches and begin taking in new events.

mouse attaches itself to document, for testing make calls to document

for button configs that include both gamepad and keyboard/mouse, the package returns values relevant to the last device that registered an interaction. So if you define a button or axis to both keyboard/mouse and gamepad, if you use your gamepad the package will return the state of the gamepad and then when it detects input from keyboard or mouse it will swap to keyboard/mouse controls until it hears another event from the gamepad.

This is so the end user can seamlessly swap between gamepad and keyboard/mouse. The user case of a player using a gamepad and keyboard/mouse simultaneously is not covered by this package.

## installation

```
yarn add unityinput
```

## configuration

Please see `src/defaults.js`. These are the defaults loaded if the package is not given a config object. It shows all the possible options.

## basic usage

```javascript
import Input from "unityinput";

let input = new Input({
	keyboardMapping: {
		ctrl: 17
	},
	buttons: {
		fire: {
			type: "keyboard",
			key: "ctrl"
		}
	}
});

let gameloop = () => {
	if (input.getButton("fire")) {
		console.log("pew pew pew");
	}
	input.endTick();
};

setInterval(gameloop, 100);
```

### checking if a button is currently down

```javascript
let input = new Input({
	keyboardMapping: {
		ctrl: 17
	},
	buttons: {
		fire: {
			type: "keyboard",
			key: "ctrl"
		}
	}
});

let gameloop = () => {
	if (input.getButton("fire")) {
		console.log("pew pew pew");
	}
	input.endTick();
};
```

### checking if a key is pressed in the last frame

```javascript
let input = new Input({
	keyboardMapping: {
		ctrl: 17
	}
});

let gameloop = () => {
	if (input.getKeyDown("ctrl")) {
		console.log("pew pew pew");
	}
	input.endTick();
};
```

## Notes

getButtonDown is currently only supporting keyboard.

## Dev

Test are written in both jest and karma/jasmine/webpack

### One-off tests

```
yarn test
yarn karma
```

### Watchers

```
yarn test:watch
yarn karma:watch
```

### Webpack dev server

```
yarn dev
```

and then hit up `http://localhost:8080/demo/` in your browser.
Coverage outputted to console and `/coverage/html`

## Docs

docs can be generated by cloning the repo and running

```
npm install
npm run docs
```
